<dl class="portlet portletMyContentPortlet"
    i18n:domain="cloudspring.sfmembers"
    id="portlet-MyContent">

<metal:block use-macro="here/global_defines/macros/defines" />
<div class="inner"> 
  <link rel="stylesheet" type="text/css" 
    tal:attributes="href string:/++resource++cloudspring.sfmembers/myContent.css" />
  <dt class="portletHeader">
    <span class="portletTopLeft"></span>
    <div><h2>My Content</h2></div>
    <span class="portletTopRight"></span>
  </dt>

  <dd class="portletItem">
    <ul id="my-content-tabs">
      <li><a href="#">Recent Content</a></li>
      <li><a href="#">Drafts</a></li>
    </ul>

    <div tal:define="wf_tool here/portal_workflow;
                     batch here/getContent"
         class="contents-block">
      <tal:block tal:repeat="item batch">
        <div class="tileItem"
             tal:define="item_url item/getURL|item/absolute_url;
                         item_edit_url string:${item_url}/edit;
                         review_state python:wf_tool.getInfoFor(item, 'review_state', '')">
          <div class="show_hide">
            <img
                 src="/++resource++cloudspring.sfmembers/orange-arrow-closed.png" title="Click for publishing options." alt=""/>
          </div>
          <div class="MyContent_title">
                        <a tal:attributes="href item_url"
               tal:content="item/Title"
               title="Read"/>
           </div>
           <div class="sliding_div">
             <div class="MyContent_edit">
               <a tal:attributes="href item_edit_url">
                 <img src="/++resource++cloudspring.sfmembers/notepad_white_16x16-32.png"
                     title="Edit" alt="Edit"/>
               </a>
             </div>
             <div class="MyContent_delete">
               <a tal:attributes="href string:${item_url}/delete_confirmation">
                 <img src="/++resource++cloudspring.sfmembers/recycle_bin_empty_white_16x16-32.png"
                     title= "Delete" alt="Delete" />
                </a>
             </div>
                      
             <form id="review_state_form" name="review_state_form" 
                   class="review-state-form" 
                   tal:attributes="action string:${item_url}/content_status_modify" method="get">
                <div class="my_content_radio">
                  <label for="radio_draft">Draft</label>
                  <input type="radio" id="radio_draft" 
                         name="workflow_action" value="hide" 
                         tal:attributes="checked python:
                         review_state=='private'"
                         onClick="this.form.submit()"/>
                  <label for="radio_myblog">My Blog</label>
                  <input type="radio" id="radio_myblog"
                         name="workflow_action" value="publish-internally" 
                         tal:attributes="checked python:
                         review_state=='internally_published'"
                         onClick="this.form.submit()"/>
                  <label for="radio_seminar">Seminar Blog</label>
                  <input type="radio" name="workflow_action"
                         id="radio_seminar" value="seminar" 
                         tal:attributes="checked python:
                         review_state=='seminar'"
                         onClick="this.form.submit()"/>
                </div>
             </form>
           </div>
        </div>
        <br clear="both"/>
      </tal:block>
    </div>
    <div tal:define="wf_tool here/portal_workflow;
                     batch here/getDrafts"
         class="contents-block">
      <tal:block tal:repeat="item batch">
        <div class="tileItem"
             tal:define="item_url item/getURL|item/absolute_url;
                         item_edit_url string:${item_url}/edit;
                         review_state python:wf_tool.getInfoFor(item, 'review_state', '')">
          <div class="show_hide">
            <img
                 src="/++resource++cloudspring.sfmembers/orange-arrow-closed.png" title="Click for publishing options." alt=""/>
          </div>
          <div class="MyContent_title">
                        <a tal:attributes="href item_url"
               tal:content="item/Title"
               title="Read"/>
           </div>
           <div class="sliding_div">
             <div class="MyContent_edit">
               <a tal:attributes="href item_edit_url">
                 <img src="/++resource++cloudspring.sfmembers/notepad_white_16x16-32.png"
                     title="Edit" alt="Edit"/>
               </a>
             </div>
             <div class="MyContent_delete">
               <a tal:attributes="href string:${item_url}/delete_confirmation">
                 <img src="/++resource++cloudspring.sfmembers/recycle_bin_empty_white_16x16-32.png"
                     title= "Delete" alt="Delete" />
                </a>
             </div>
                      
             <form id="review_state_form" name="review_state_form" 
                   class="review-state-form" 
                  tal:attributes="action string:${item_url}/content_status_modify" method="get">
                <div class="my_content_radio">
                  <input type="radio" id="radio_draft" 
                         name="workflow_action" value="hide" 
                         tal:attributes="checked python:
                         review_state=='private'"
                         onClick="this.form.submit()" />
                  <label for="radio_draft">Draft</label>
                  <input type="radio" id="radio_myblog"
                         name="workflow_action" value="publish-internally" 
                         tal:attributes="checked python:
                         review_state=='internally_published'"
                         onClick="this.form.submit()" />
                  <label for="radio_myblog">My Blog</label>
                  <input type="radio" name="workflow_action"
                         id="radio_seminar" value="seminar" 
                         tal:attributes="checked python:
                         review_state=='seminar'" 
                         onClick="this.form.submit()" />
                  <label for="radio_seminar">Seminar Blog</label>
                </div>
             </form>
           </div>
        </div>
        <br clear="both"/>
      </tal:block>
    </div>
    <ul>
      <li class="create-blog-post">
        <a tal:attributes="href string:${view/getUrl}/blog/createObject?type_name=Blog+Entry">
          Create new content 
        </a>
      </li>
      <li>
        <a tal:attributes="href string:${view/getUrl}">
          Go to my blog
        </a>
      </li>
      <li>
        <a tal:attributes="href string:${view/getUrl}/drafts">
          Go to my drafts 
        </a>
      </li>
    </ul>
 
  </dd>

  <dd class="portletFooter">
    <span class="portletBottomLeft"></span>
    <span class="portletBottomRight"></span>
  </dd>
</div>
</dl>
